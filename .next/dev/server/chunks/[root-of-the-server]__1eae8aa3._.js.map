{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/daniel/Social/lib/auth.js"],"sourcesContent":["import { betterAuth } from \"better-auth\";\nimport { prismaAdapter } from \"better-auth/adapters/prisma\";\nimport { PrismaClient } from \"@prisma/client\";\nconst prisma = new PrismaClient();\nexport const auth = betterAuth({\n  database: prismaAdapter(prisma, {\n    provider: \"postgresql\",\n  }),\n  secret: process.env.AUTH_SECRET,\n  baseURL: process.env.AUTH_URL,\n  emailAndPassword: {\n    enabled: true,\n  },\n\n  user: {\n    additionalFields: {\n      plan: {\n        type: \"enum\",\n        values: [\"free\", \"monthly\", \"pro\"],\n        required: true,\n        defaultValue: \"free\",\n      },\n      planDate: {\n        type: \"date\",\n        required: false,\n      },\n      usageCount: {\n        type: \"number\",\n        defaultValue: 0,\n        required: true,\n      },\n    },\n  },\n  session: {\n    expiresIn: 60 * 60 * 24 * 7, // 7 days\n    updateAge: 60 * 60 * 24, // 24 hours\n  },\n});\nexport { auth };\n{\n  /*  socialProviders: {\n    google: {\n      enabled: true,\n      clientId: process.env.GOOGLE_CLIENT_ID,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n    },\n  },* */\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AACA,MAAM,SAAS,IAAI,6IAAY;AACxB,MAAM,OAAO,IAAA,8aAAU,EAAC;IAC7B,UAAU,IAAA,gaAAa,EAAC,QAAQ;QAC9B,UAAU;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,WAAW;IAC/B,SAAS,QAAQ,GAAG,CAAC,QAAQ;IAC7B,kBAAkB;QAChB,SAAS;IACX;IAEA,MAAM;QACJ,kBAAkB;YAChB,MAAM;gBACJ,MAAM;gBACN,QAAQ;oBAAC;oBAAQ;oBAAW;iBAAM;gBAClC,UAAU;gBACV,cAAc;YAChB;YACA,UAAU;gBACR,MAAM;gBACN,UAAU;YACZ;YACA,YAAY;gBACV,MAAM;gBACN,cAAc;gBACd,UAAU;YACZ;QACF;IACF;IACA,SAAS;QACP,WAAW,KAAK,KAAK,KAAK;QAC1B,WAAW,KAAK,KAAK;IACvB;AACF;;AAEA;AACE;;;;;;MAMI,GACN","debugId":null}},
    {"offset": {"line": 109, "column": 10}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///home/daniel/Social/lib/model/tts.js"],"sourcesContent":["import { InferenceClient } from \"@huggingface/inference\";\nconst client = new InferenceClient(process.env.HF_TOKEN);\nconst convertAudio = async ({ text }) => {\n  try {\n    const audioBlob = await client.textToSpeech({\n      provider: \"fal-ai\",\n      model: \"hexgrad/Kokoro-82M\",\n      inputs: text,\n    });\n    const audioBuffer = await audioBlob.arrayBuffer();\n    return audioBuffer;\n  } catch (error) {\n    throw new Error(\n      error instanceof Error ? error.message : \"Failed to generate completion\"\n    );\n  }\n};\nexport default convertAudio;\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AACA,MAAM,SAAS,IAAI,yQAAe,CAAC,QAAQ,GAAG,CAAC,QAAQ;AACvD,MAAM,eAAe,OAAO,EAAE,IAAI,EAAE;IAClC,IAAI;QACF,MAAM,YAAY,MAAM,OAAO,YAAY,CAAC;YAC1C,UAAU;YACV,OAAO;YACP,QAAQ;QACV;QACA,MAAM,cAAc,MAAM,UAAU,WAAW;QAC/C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MACR,iBAAiB,QAAQ,MAAM,OAAO,GAAG;IAE7C;AACF;uCACe","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///home/daniel/Social/app/api/voice/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\nimport { auth } from \"../../../lib/auth\";\nimport { headers } from \"next/headers\";\nimport convertAudio from \"../../../lib/model/tts\";\nconst Ai = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\nexport const POST = async (req) => {\n  try {\n    const session = await auth.api.getSession({ headers: await headers() });\n    console.log({ session });\n    if (!session) {\n      return NextResponse.json(\n        { error: \"Please login to proceed\" },\n        { status: 401 }\n      );\n    }\n    const user = session.user;\n\n    const { data, error } = await auth.api.updateUser({\n      body: {\n        usageCount: user.usageCount + 1,\n      },\n      headers: await headers(),\n    });\n    if (error) {\n      throw new Error(error);\n    }\n    const { text } = await req.json();\n    if (!text)\n      return NextResponse.json({ error: \"Missing required parameters\" });\n    const audioBlob = await convertAudio({ text });\n    return new NextResponse(audioBlob, {\n      status: 200,\n      headers: {\n        \"Content-Type\": \"audio/mpeg\",\n        \"Content-Disposition\": 'inline; filename=\"voiceover.mp3\"',\n      },\n    });\n  } catch (error) {\n    console.error(error);\n    return NextResponse.json(\n      {\n        error:\n          process.env.NODE_ENV === \"production\"\n            ? \"Internal server error\"\n            : error.message,\n      },\n      { status: 500 }\n    );\n  }\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AACA,MAAM,KAAK,IAAI,gQAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;AACrD,MAAM,OAAO,OAAO;IACzB,IAAI;QACF,MAAM,UAAU,MAAM,qHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YAAE,SAAS,MAAM,IAAA,iWAAO;QAAG;QACrE,QAAQ,GAAG,CAAC;YAAE;QAAQ;QACtB,IAAI,CAAC,SAAS;YACZ,OAAO,qWAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,OAAO,QAAQ,IAAI;QAEzB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YAChD,MAAM;gBACJ,YAAY,KAAK,UAAU,GAAG;YAChC;YACA,SAAS,MAAM,IAAA,iWAAO;QACxB;QACA,IAAI,OAAO;YACT,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAC/B,IAAI,CAAC,MACH,OAAO,qWAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B;QAClE,MAAM,YAAY,MAAM,IAAA,gIAAY,EAAC;YAAE;QAAK;QAC5C,OAAO,IAAI,qWAAY,CAAC,WAAW;YACjC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,uBAAuB;YACzB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,qWAAY,CAAC,IAAI,CACtB;YACE,OACE,sCACI,0BACA,MAAM,OAAO;QACrB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}